{"version":3,"file":"Flyout-63e5793c.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/flyout/Flyout.tsx"],"sourcesContent":["import React, { cloneElement, ForwardedRef, forwardRef, useImperativeHandle } from 'react';\nimport ReactDOM from 'react-dom';\nimport { DEFAULT_SIZE, SIZE_MAP } from '../../../constants/layout.settings';\nimport { classNames } from '../../../utils/dom.utils';\nimport { FlyoutProps } from './Flyout.types';\n\nexport const Flyout = forwardRef(function Flyout(\n  { trigger, open, hasPadding, orientation, size, children, scrollable, onStateChange, qa }: FlyoutProps,\n  forwardRef: ForwardedRef<null>\n) {\n  const [isOpen, setIsOpen] = React.useState(!!open);\n  const showFlyout = open === false || open === true ? open : isOpen;\n\n  const flyoutRef = React.useRef(null);\n  useImperativeHandle(forwardRef, () => flyoutRef.current);\n\n  const _handleOutsideClick = React.useCallback(\n    (e: MouseEvent) => {\n      const area = ReactDOM.findDOMNode(flyoutRef.current);\n      if (area && !area.contains(e.target as HTMLInputElement)) {\n        setIsOpen(false);\n        onStateChange && onStateChange(false);\n      }\n    },\n    [onStateChange]\n  );\n\n  const initEventHandlers = React.useCallback(() => {\n    if (showFlyout) {\n      document.addEventListener('click', _handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', _handleOutsideClick, false);\n    }\n  }, [_handleOutsideClick, showFlyout]);\n\n  const _toggleIsOpen = () => {\n    setIsOpen(!showFlyout);\n    initEventHandlers();\n    onStateChange && onStateChange(!showFlyout);\n  };\n\n  React.useEffect(() => {\n    initEventHandlers();\n  }, [initEventHandlers]);\n\n  const flyoutClasses = classNames({\n    'm-flyout': true,\n    'is-open': !!showFlyout,\n    'u-text-right': !!orientation?.includes('right'),\n    [`m-flyout--${orientation}`]: !!orientation,\n    [`m-flyout--${SIZE_MAP[size || DEFAULT_SIZE]}`]: !!size,\n    'm-flyout--scrollable': !!scrollable\n  });\n\n  const flyoutContentClasses = classNames({\n    'm-flyout__content': true,\n    'has-padding': !!hasPadding\n  });\n\n  return trigger ? (\n    <div className={flyoutClasses} ref={flyoutRef} data-qa={qa}>\n      {cloneElement(trigger, { onClick: _toggleIsOpen, 'aria-haspopup': true, 'aria-expanded': showFlyout })}\n      <div className={flyoutContentClasses} {...(scrollable ? { tabIndex: 0 } : {})}>\n        {children}\n      </div>\n    </div>\n  ) : null;\n});\n\nFlyout.defaultProps = {\n  hasPadding: true,\n  scrollable: false,\n  orientation: 'bottom-left'\n};\n\nexport default Flyout;\n"],"names":["Flyout","forwardRef","__name","trigger","open","hasPadding","orientation","size","children","scrollable","onStateChange","qa","isOpen","setIsOpen","React","useState","showFlyout","flyoutRef","useRef","current","_handleOutsideClick","useCallback","e","area","ReactDOM","findDOMNode","contains","target","initEventHandlers","addEventListener","removeEventListener","_toggleIsOpen","useEffect","flyoutClasses","classNames","includes","SIZE_MAP","DEFAULT_SIZE","flyoutContentClasses","cloneElement","onClick","_jsx","tabIndex","defaultProps"],"mappings":"gUAMaA,MAAAA,EAASC,EAAAA,QAAAA,WAAWC,EAAA,SAC/B,CAAEC,QAAAA,EAASC,KAAAA,EAAMC,WAAAA,EAAYC,YAAAA,EAAaC,KAAAA,EAAMC,SAAAA,EAAUC,WAAAA,EAAYC,cAAAA,EAAeC,GAAAA,CAAgB,EACrGV,EACA,CACM,KAAA,CAACW,EAAQC,CAAS,EAAIC,EAAMC,SAAS,CAAC,CAACX,CAAI,EAC3CY,EAAaZ,IAAS,IAASA,IAAS,GAAOA,EAAOQ,EAEtDK,EAAYH,EAAMI,OAAO,IAAI,EACfjB,EAAAA,QAAAA,oBAAAA,EAAY,IAAMgB,EAAUE,OAAO,EAEvD,MAAMC,EAAsBN,EAAMO,YAC/BC,GAAkB,CACjB,MAAMC,EAAOC,EAASC,YAAYR,EAAUE,OAAO,EAC/CI,GAAQ,CAACA,EAAKG,SAASJ,EAAEK,UAC3Bd,EAAU,EAAK,EACfH,GAAiBA,EAAc,EAAK,EACtC,EAEF,CAACA,CAAa,CAAC,EAGXkB,EAAoBd,EAAMO,YAAY,IAAM,CAC5CL,EACOa,SAAAA,iBAAiB,QAAST,EAAqB,EAAK,EAEpDU,SAAAA,oBAAoB,QAASV,EAAqB,EAAK,CAClE,EACC,CAACA,EAAqBJ,CAAU,CAAC,EAE9Be,EAAgB7B,EAAA,IAAM,CAC1BW,EAAU,CAACG,CAAU,EACFY,IACFlB,GAAAA,EAAc,CAACM,CAAU,CAAA,EAHtB,iBAMtBF,EAAMkB,UAAU,IAAM,CACDJ,GAAA,EAClB,CAACA,CAAiB,CAAC,EAEtB,MAAMK,EAAgBC,EAAW,CAC/B,WAAY,GACZ,UAAW,CAAC,CAAClB,EACb,eAAgB,CAAC,EAACV,GAAAA,MAAAA,EAAa6B,SAAS,UACxC,CAAE,aAAY7B,KAAgB,CAAC,CAACA,EAChC,CAAE,aAAY8B,EAAS7B,GAAQ8B,MAAkB,CAAC,CAAC9B,EACnD,uBAAwB,CAAC,CAACE,CAAAA,CAC3B,EAEK6B,EAAuBJ,EAAW,CACtC,oBAAqB,GACrB,cAAe,CAAC,CAAC7B,CAAAA,CAClB,EAEMF,OAAAA,IACL,MAAA,CAAK,UAAW8B,EAAe,IAAKhB,EAAW,UAASN,EAAG,SACxD4B,CAAAA,EAAAA,QAAAA,aAAapC,EAAS,CAAEqC,QAAST,EAAe,gBAAiB,GAAM,gBAAiBf,CAAAA,CAAY,EACrGyB,EAAA,MAAA,CAAK,UAAWH,EAAqB,GAAM7B,EAAa,CAAEiC,SAAU,CAAA,EAAM,CAAC,EAAC,SAAAlC,CAAA,CAEtE,CAAA,CAAA,CAAA,EAEN,IACN,EA7DiC,UA6DhC,EAEDR,EAAO2C,aAAe,CACpBtC,WAAY,GACZI,WAAY,GACZH,YAAa,aACf"}