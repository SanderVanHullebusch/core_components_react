{"version":3,"file":"PageIndicator.stories-2a4c8657.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/page-indicator/PageIndicator.tsx"],"sourcesContent":["import React, { KeyboardEvent } from 'react';\nimport { classNames } from '../../../utils/dom.utils';\nimport { PageIndicatorProps } from './PageIndicator.types';\nimport { DEFAULT_SIZE, SIZE_MAP } from '../../../constants/layout.settings';\n\n// Keyboard and Tab handling according to ARIA spec\n// https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tab_role\n\nexport function PageIndicator({ qa, size, pages, activePage, onPageChange }: PageIndicatorProps) {\n  const [focusedIndex, setFocusedIndex] = React.useState(0);\n\n  const handleFocus = (index: number) => setFocusedIndex(index);\n\n  const clickHandler = (pageId: string) => () => onPageChange && onPageChange(pageId);\n\n  const handleArrowNavigation = (e: KeyboardEvent<HTMLDivElement>) => {\n    const isLeft = e.key === 'ArrowLeft';\n    const isRight = e.key === 'ArrowRight';\n    if (isLeft || isRight) {\n      document.getElementById(activePage)?.setAttribute('tabindex', '-1');\n      let newFocusedIndex = focusedIndex;\n      if (isRight) {\n        newFocusedIndex = focusedIndex + 1 >= pages.length ? 0 : focusedIndex + 1;\n        setFocusedIndex(newFocusedIndex);\n      }\n      if (isLeft) {\n        newFocusedIndex = focusedIndex - 1 < 0 ? pages.length - 1 : focusedIndex - 1;\n        setFocusedIndex(newFocusedIndex);\n      }\n      const nextElementToFocusId = pages[newFocusedIndex].id;\n      if (nextElementToFocusId) {\n        const elToFocus = document.getElementById(nextElementToFocusId);\n        elToFocus?.setAttribute('tabindex', '0');\n        pages\n          .filter((p) => p.id !== nextElementToFocusId)\n          .forEach((p) => {\n            document.getElementById(p.id)?.setAttribute('tabindex', '-1');\n          });\n        elToFocus?.focus();\n      }\n    }\n  };\n\n  const classes = classNames({\n    'a-page-indicator': true,\n    [`a-page-indicator--${SIZE_MAP[size || DEFAULT_SIZE]}`]: !!size\n  });\n\n  return (\n    <div className={classes} data-qa={qa} onKeyDown={handleArrowNavigation} role=\"tablist\">\n      {pages?.map((page, index) => {\n        const isActive = !!activePage && activePage === page.id;\n        const classes = classNames({\n          'a-page-indicator__item': true,\n          'is-active': isActive\n        });\n        return (\n          <button\n            key={page.id}\n            id={page.id}\n            role=\"tab\"\n            className={classes}\n            aria-label={page.ariaLabel}\n            aria-selected={isActive ? 'true' : 'false'}\n            aria-controls={page.ariaControls}\n            tabIndex={isActive ? 0 : -1}\n            onClick={clickHandler(page.id)}\n            onFocus={() => handleFocus(index)}\n          ></button>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default PageIndicator;\n"],"names":["PageIndicator","qa","size","pages","activePage","onPageChange","focusedIndex","setFocusedIndex","React","handleFocus","index","clickHandler","pageId","handleArrowNavigation","isLeft","isRight","_a","newFocusedIndex","nextElementToFocusId","elToFocus","p","classes","classNames","SIZE_MAP","DEFAULT_SIZE","jsx","page","isActive"],"mappings":"4PAQO,SAASA,EAAc,CAAE,GAAAC,EAAI,KAAAC,EAAM,MAAAC,EAAO,WAAAC,EAAY,aAAAC,GAAoC,CAC/F,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAM,SAAS,CAAC,EAElDC,EAAeC,GAAkBH,EAAgBG,CAAK,EAEtDC,EAAgBC,GAAmB,IAAMP,GAAgBA,EAAaO,CAAM,EAE5EC,EAAyB,GAAqC,OAC5D,MAAAC,EAAS,EAAE,MAAQ,YACnBC,EAAU,EAAE,MAAQ,aAC1B,GAAID,GAAUC,EAAS,EACrBC,EAAA,SAAS,eAAeZ,CAAU,IAAlC,MAAAY,EAAqC,aAAa,WAAY,MAC9D,IAAIC,EAAkBX,EAClBS,IACFE,EAAkBX,EAAe,GAAKH,EAAM,OAAS,EAAIG,EAAe,EACxEC,EAAgBU,CAAe,GAE7BH,IACFG,EAAkBX,EAAe,EAAI,EAAIH,EAAM,OAAS,EAAIG,EAAe,EAC3EC,EAAgBU,CAAe,GAE3B,MAAAC,EAAuBf,EAAMc,CAAe,EAAE,GACpD,GAAIC,EAAsB,CAClB,MAAAC,EAAY,SAAS,eAAeD,CAAoB,EACnDC,GAAA,MAAAA,EAAA,aAAa,WAAY,KAEjChB,EAAA,OAAQiB,GAAMA,EAAE,KAAOF,CAAoB,EAC3C,QAASE,GAAM,QACdJ,EAAA,SAAS,eAAeI,EAAE,EAAE,IAA5B,MAAAJ,EAA+B,aAAa,WAAY,KAAI,CAC7D,EACHG,GAAA,MAAAA,EAAW,OACb,CACF,CAAA,EAGIE,EAAUC,EAAW,CACzB,mBAAoB,GACpB,CAAC,qBAAqBC,EAASrB,GAAQsB,CAAY,CAAC,EAAE,EAAG,CAAC,CAACtB,CAAA,CAC5D,EAED,OACGuB,EAAA,MAAA,CAAI,UAAWJ,EAAS,UAASpB,EAAI,UAAWY,EAAuB,KAAK,UAC1E,SAAAV,GAAA,YAAAA,EAAO,IAAI,CAACuB,EAAMhB,IAAU,CAC3B,MAAMiB,EAAW,CAAC,CAACvB,GAAcA,IAAesB,EAAK,GAC/CL,EAAUC,EAAW,CACzB,yBAA0B,GAC1B,YAAaK,CAAA,CACd,EAEC,OAAAF,EAAC,SAAA,CAEC,GAAIC,EAAK,GACT,KAAK,MACL,UAAWL,EACX,aAAYK,EAAK,UACjB,gBAAeC,EAAW,OAAS,QACnC,gBAAeD,EAAK,aACpB,SAAUC,EAAW,EAAI,GACzB,QAAShB,EAAae,EAAK,EAAE,EAC7B,QAAS,IAAMjB,EAAYC,CAAK,CAAA,EAT3BgB,EAAK,EAAA,CAYf,EACH,CAAA,CAEJ;;;;;;;;;;;;;;;;;"}