{"version":3,"file":"Upload.stories-16669bc7.js","sources":["../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/UploadFile.tsx","../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/Upload.tsx"],"sourcesContent":["import { hasValidFormat, hasValidSize } from '../../../utils/file.utils';\nimport { Button } from '../../atoms/button';\nimport { Icon } from '../../base/icon';\nimport { UploadFileProps } from './Upload.types';\n\nexport function UploadFile({\n  file,\n  acceptedFormat,\n  maxSize,\n  onDelete,\n  formatErrorLabel,\n  deleteAriaLabel,\n  sizeErrorLabel\n}: UploadFileProps) {\n  const isValidFormat = hasValidFormat(file, acceptedFormat);\n  const isValidSize = hasValidSize(file, maxSize);\n  return (\n    <li key={file.name}>\n      <Icon name={isValidFormat && isValidSize ? 'common-file-empty' : 'alert-triangle'} />\n      <span className=\"m-upload__filename\">{file.name}</span>\n      {!isValidFormat && <span className=\"m-upload__error\">{formatErrorLabel}</span>}\n      {!isValidSize && <span className=\"m-upload__error\">{sizeErrorLabel}</span>}\n      {onDelete && (\n        <div className=\"m-upload__delete\">\n          <Button\n            ariaLabel={deleteAriaLabel}\n            addOn={{ type: 'icon', iconProps: { name: 'remove' } }}\n            emphasis=\"low\"\n            theme=\"danger\"\n            size=\"small\"\n            onClick={() => onDelete(file)}\n          />\n        </div>\n      )}\n    </li>\n  );\n}\n\nexport default UploadFile;\n","import React, { ChangeEvent } from 'react';\nimport { classNames } from '../../../utils/dom.utils';\nimport { areFilesValid } from '../../../utils/file.utils';\nimport { UploadProps } from './Upload.types';\nimport { UploadFile } from './UploadFile';\n\nexport function Upload({\n  acceptedFormat,\n  deleteAriaLabel,\n  disabled,\n  files,\n  formatErrorLabel,\n  id,\n  label,\n  maxSize,\n  maxSizeLabel,\n  multiple,\n  onChange,\n  onDelete,\n  sizeErrorLabel,\n  qa\n}: UploadProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const handleDelete = (file: File) => {\n    onDelete && onDelete(files?.filter((f) => f?.name !== file.name));\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (multiple) {\n      const newFiles = e.target?.files\n        ? [...files, ...Array.from(e.target.files)].filter(\n            (file, index, self) => self.findIndex((f) => f.name === file.name) === index\n          )\n        : [];\n      onChange && onChange(newFiles, areFilesValid(newFiles, acceptedFormat, maxSize));\n    } else {\n      const newFile = e.target?.files?.[0] ? [e.target?.files?.[0]] : [];\n      onChange && onChange(newFile, areFilesValid(newFile, acceptedFormat, maxSize));\n    }\n  };\n\n  return (\n    <div className={classNames({ 'm-upload': true, 'is-disabled': !!disabled })} data-qa={qa}>\n      <div className=\"m-upload__inner\">\n        <div className=\"m-upload__dropzone\">\n          <input\n            ref={inputRef}\n            id={id}\n            type=\"file\"\n            multiple={multiple}\n            onChange={handleChange}\n            accept={acceptedFormat}\n            className=\"m-upload__input\"\n            disabled={disabled}\n            aria-describedby={`${id}-description`}\n          />\n          <div className=\"m-upload__content\">\n            <label htmlFor={id} className=\"m-upload__message u-margin-bottom\">\n              {label}\n            </label>\n          </div>\n        </div>\n      </div>\n      {maxSize && (\n        <small id={`${id}-description`} className=\"m-upload__description\">\n          {maxSizeLabel} {maxSize}MB\n        </small>\n      )}\n      <ul className=\"m-upload__files\">\n        {files?.map((f) => (\n          <UploadFile\n            file={f}\n            deleteAriaLabel={deleteAriaLabel}\n            formatErrorLabel={formatErrorLabel}\n            sizeErrorLabel={sizeErrorLabel}\n            key={f?.name}\n            onDelete={onDelete && handleDelete}\n            maxSize={maxSize}\n            acceptedFormat={acceptedFormat}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nUpload.defaultProps = {\n  label: 'Sleep een bestand hier of klik om te bladeren',\n  maxSize: 10,\n  multiple: true,\n  disabled: false,\n  acceptedFormat: '*',\n  files: [],\n  maxSizeLabel: 'Maximale bestandsgrootte:',\n  formatErrorLabel: 'Dit bestandsformaat is niet toegestaan.',\n  sizeErrorLabel: 'Maximale bestandsgrootte overschreden.',\n  deleteAriaLabel: 'Verwijder bestand'\n};\n\nexport default Upload;\n"],"names":["UploadFile","file","acceptedFormat","maxSize","onDelete","formatErrorLabel","deleteAriaLabel","sizeErrorLabel","isValidFormat","hasValidFormat","isValidSize","hasValidSize","_jsx","Icon","name","Button","type","iconProps","Upload","disabled","files","id","label","maxSizeLabel","multiple","onChange","qa","inputRef","React","useRef","handleDelete","__name","filter","f","current","value","handleChange","e","newFiles","target","Array","from","index","self","findIndex","areFilesValid","newFile","classNames","_jsxs","map","defaultProps"],"mappings":"inBAKO,SAASA,EAAW,CACzBC,KAAAA,EACAC,eAAAA,EACAC,QAAAA,EACAC,SAAAA,EACAC,iBAAAA,EACAC,gBAAAA,EACAC,eAAAA,CACe,EAAG,CACZC,MAAAA,EAAgBC,EAAeR,EAAMC,CAAc,EACnDQ,EAAcC,EAAaV,EAAME,CAAO,EAC9C,SACE,KAAA,CAAA,SAAA,CACES,EAACC,EAAI,CAAC,KAAML,GAAiBE,EAAc,oBAAsB,gBAAA,CAAiB,EAClFE,EAAA,OAAA,CAAM,UAAU,qBAAoB,SAAEX,EAAKa,IAAY,CAAA,EACtD,CAACN,KAAiB,OAAA,CAAM,UAAU,kBAAiB,SAAEH,CAAwB,CAAA,EAC7E,CAACK,KAAe,OAAA,CAAM,UAAU,kBAAiB,SAAEH,CAAAA,CAAsB,EACzEH,GACCQ,EAAA,MAAA,CAAK,UAAU,mBAAkB,WAC9BG,EAAM,CACL,UAAWT,EACX,MAAO,CAAEU,KAAM,OAAQC,UAAW,CAAEH,KAAM,QAAS,CAAE,EACrD,SAAS,MACT,MAAM,SACN,KAAK,QACL,QAAS,IAAMV,EAASH,CAAI,CAAA,CAAE,CAAA,CAGnC,CAAA,CAAA,EAhBMA,EAAKa,IAAI,CAmBtB,CA/BgBd,EAAAA,EAAAA,cCCT,SAASkB,EAAO,CACrBhB,eAAAA,EACAI,gBAAAA,EACAa,SAAAA,EACAC,MAAAA,EACAf,iBAAAA,EACAgB,GAAAA,EACAC,MAAAA,EACAnB,QAAAA,EACAoB,aAAAA,EACAC,SAAAA,EACAC,SAAAA,EACArB,SAAAA,EACAG,eAAAA,EACAmB,GAAAA,CACW,EAAG,CACRC,MAAAA,EAAWC,EAAMC,OAAyB,IAAI,EAE9CC,EAAeC,EAAC9B,GAAe,CACvBG,GAAAA,EAASgB,GAAAA,YAAAA,EAAOY,OAAQC,IAAMA,GAAAA,YAAAA,EAAGnB,QAASb,EAAKa,KAAK,EAC5Da,EAASO,UACXP,EAASO,QAAQC,MAAQ,GAC3B,EAJmB,gBAOfC,EAAeL,EAACM,GAAqC,eACzD,GAAIb,EAAU,CACZ,MAAMc,GAAWD,EAAAA,EAAEE,SAAFF,MAAAA,EAAUjB,MACvB,CAAC,GAAGA,EAAO,GAAGoB,MAAMC,KAAKJ,EAAEE,OAAOnB,KAAK,CAAC,EAAEY,OACxC,CAAC/B,EAAMyC,EAAOC,IAASA,EAAKC,UAAWX,GAAMA,EAAEnB,OAASb,EAAKa,IAAI,IAAM4B,CAAK,EAE9E,CAAA,EACJjB,GAAYA,EAASa,EAAUO,EAAcP,EAAUpC,EAAgBC,CAAO,CAAC,CAAA,KAC1E,CACC2C,MAAAA,GAAUT,GAAAA,EAAAA,EAAEE,SAAFF,YAAAA,EAAUjB,QAAViB,MAAAA,EAAkB,GAAK,EAACA,GAAAA,EAAAA,EAAEE,SAAFF,YAAAA,EAAUjB,QAAViB,YAAAA,EAAkB,EAAE,EAAI,CAAA,EAChEZ,GAAYA,EAASqB,EAASD,EAAcC,EAAS5C,EAAgBC,CAAO,CAAC,CAC/E,CAAA,EAXmB,gBAcrB,SACE,MAAA,CAAK,UAAW4C,EAAW,CAAE,WAAY,GAAM,cAAe,CAAC,CAAC5B,CAAAA,CAAU,EAAG,UAASO,EAAG,SACvF,CAAAd,EAAA,MAAA,CAAK,UAAU,kBAAiB,WAC9B,MAAA,CAAK,UAAU,qBAAoB,SACjC,CAAAA,EAAA,QAAA,CACE,IAAKe,EACL,GAAAN,EACA,KAAK,OACL,SAAAG,EACA,SAAUY,EACV,OAAQlC,EACR,UAAU,kBACV,SAAAiB,EACA,mBAAmB,GAAEE,eAAAA,CAAiB,EAExCT,EAAA,MAAA,CAAK,UAAU,oBAAmB,WAChC,QAAA,CAAO,QAASS,EAAI,UAAU,oCAAmC,SAC9DC,CAAAA,CAAK,CAAA,CAEJ,CAAA,CAAA,CAAA,CAAA,CAEJ,EACLnB,GACC6C,EAAA,QAAA,CAAO,GAAK,GAAE3B,gBAAkB,UAAU,wBAAuB,SAC9DE,CAAAA,MAAepB,EAAO,IAAA,CAAA,CAAA,EAG3BS,EAAA,KAAA,CAAI,UAAU,kBAAiB,SAC5BQ,GAAAA,YAAAA,EAAO6B,IAAKhB,KACVjC,EAAU,CACT,KAAMiC,EACN,gBAAA3B,EACA,iBAAAD,EACA,eAAAE,EAEA,SAAUH,GAAY0B,EACtB,QAAA3B,EACA,eAAAD,CAAA,EAHK+B,GAAAA,YAAAA,EAAGnB,IAAI,EAKf,CACE,CAAA,CAAA,CACD,CAEV,CAlFgBI,EAAAA,EAAAA,UAoFhBA,EAAOgC,aAAe,CACpB5B,MAAO,gDACPnB,QAAS,GACTqB,SAAU,GACVL,SAAU,GACVjB,eAAgB,IAChBkB,MAAO,CAAE,EACTG,aAAc,4BACdlB,iBAAkB,0CAClBE,eAAgB,yCAChBD,gBAAiB,mBACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}